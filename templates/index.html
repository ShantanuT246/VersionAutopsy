<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VersionAutopsy â€” Dependency Risk Analyzer</title>
    <meta name="description"
        content="Identify Python dependency upgrade risks using semantic versioning analysis. Paste your requirements.txt and get instant risk reports.">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>

    <!-- ===== SIDEBAR ===== -->
    <aside class="sidebar">
        <div class="sidebar-logo">
            <div class="logo-icon">ğŸ”</div>
            <h2>VersionAutopsy</h2>
            <span>Dependency Risk Analyzer</span>
        </div>

        <nav class="sidebar-nav">
            <div class="nav-label">Tools</div>
            <button class="nav-link active" onclick="scrollToSection('analyzeSection')">
                <span class="nav-icon">ğŸ“‹</span> Analyze Dependencies
            </button>
            <button class="nav-link" onclick="scrollToSection('checkSection')">
                <span class="nav-icon">ğŸ”</span> Check Single Package
            </button>

            <div class="nav-label">Results</div>
            <button class="nav-link" onclick="scrollToSection('resultsSection')" id="navResults">
                <span class="nav-icon">ğŸ“Š</span> Risk Report
                <span class="nav-badge" id="navBadge" style="display:none">0</span>
            </button>
        </nav>

        <div class="sidebar-footer">
            <div class="sidebar-version">v1.0.0 Â· PyPI API</div>
        </div>
    </aside>

    <!-- ===== MAIN WRAPPER ===== -->
    <div class="app-wrapper">

        <!-- Top Header -->
        <header class="top-header">
            <div>
                <div class="page-title">Dashboard</div>
                <div class="page-subtitle">Semantic versioning risk assessment</div>
            </div>
            <div class="header-actions">
                <span class="header-badge">ğŸ Python</span>
                <button class="theme-toggle" id="themeToggle" title="Toggle dark / light mode" aria-label="Toggle dark mode">ğŸŒ™</button>
                <div class="header-dot" title="PyPI API Connected"></div>
            </div>
        </header>

        <!-- Page Content -->
        <main class="page-content">

            <!-- ===== STATS ROW ===== -->
            <div class="stats-grid" id="statsGrid">
                <div class="stat-card">
                    <div class="stat-icon primary">ğŸ“¦</div>
                    <div class="stat-info">
                        <div class="stat-value" id="statTotal">0</div>
                        <div class="stat-label">Packages Analyzed</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon danger">âš ï¸</div>
                    <div class="stat-info">
                        <div class="stat-value" id="statHigh">0</div>
                        <div class="stat-label">High Risk</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon warning">âš¡</div>
                    <div class="stat-info">
                        <div class="stat-value" id="statMedium">0</div>
                        <div class="stat-label">Medium Risk</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon success">âœ…</div>
                    <div class="stat-info">
                        <div class="stat-value" id="statSafe">0</div>
                        <div class="stat-label">Safe / Up-to-Date</div>
                    </div>
                </div>
            </div>

            <!-- ===== FORM 1: Analyze Dependencies ===== -->
            <div class="panel" id="analyzeSection">
                <div class="panel-header">
                    <div>
                        <div class="panel-title">
                            <div class="panel-icon">ğŸ“‹</div>
                            Analyze Dependencies
                        </div>
                        <div class="panel-desc">Paste your requirements.txt to analyze all packages at once</div>
                    </div>
                </div>
                <div class="panel-body">
                    <form id="analyzeForm">
                        <div class="form-group">
                            <label class="form-label" for="requirements">requirements.txt Content</label>
                            <textarea class="form-control" id="requirements" name="requirements" rows="8"
                                placeholder="flask==2.0.0&#10;requests==2.25.0&#10;numpy==1.21.0&#10;pandas==1.3.0"
                                required></textarea>
                            <div class="form-hint">ğŸ’¡ Format: <code>package==version</code> â€” one per line</div>
                            <div class="error-message" id="analyzeError">âš ï¸ <span id="analyzeErrorText"></span></div>
                        </div>
                        <button type="submit" class="btn btn-primary" id="analyzeBtn">
                            <span>Run Analysis</span>
                            <span class="loader" id="analyzeLoader"></span>
                        </button>
                    </form>
                </div>
            </div>

            <!-- ===== RESULTS TABLE ===== -->
            <div class="panel results-section" id="resultsSection">
                <div class="panel-header">
                    <div>
                        <div class="panel-title">
                            <div class="panel-icon">ğŸ“Š</div>
                            Risk Report
                        </div>
                        <div class="panel-desc" id="reportSubtitle">Dependency analysis results</div>
                    </div>
                    <button class="btn btn-outline" onclick="clearResults()"
                        style="font-size:.8rem; padding:7px 14px;">Clear</button>
                </div>

                <div class="summary-bar" id="summaryBar"></div>

                <div class="table-wrap">
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th>Package</th>
                                <th>Current</th>
                                <th>Latest</th>
                                <th>Risk Level</th>
                                <th>Explanation</th>
                            </tr>
                        </thead>
                        <tbody id="resultsBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- ===== FORM 2: Single Package ===== -->
            <div class="panel" id="checkSection">
                <div class="panel-header">
                    <div>
                        <div class="panel-title">
                            <div class="panel-icon">ğŸ”</div>
                            Check Single Package
                        </div>
                        <div class="panel-desc">Manually check a specific package and version</div>
                    </div>
                </div>
                <div class="panel-body">
                    <form id="checkPackageForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="packageName">Package Name</label>
                                <input class="form-control" type="text" id="packageName" name="packageName"
                                    placeholder="e.g., flask" pattern="[a-zA-Z0-9\-_]+" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="currentVersion">Current Version</label>
                                <input class="form-control" type="text" id="currentVersion" name="currentVersion"
                                    placeholder="e.g., 2.0.0" pattern="^\d+(\.\d+)*$" required>
                            </div>
                        </div>
                        <div class="form-hint">ğŸ’¡ Use semantic versioning â€” e.g., <code>2.31.0</code></div>
                        <div class="error-message" id="checkPackageError" style="margin-bottom:12px;">âš ï¸ <span
                                id="checkPackageErrorText"></span></div>
                        <button type="submit" class="btn btn-primary" id="checkBtn">
                            <span>Check Package</span>
                            <span class="loader" id="checkLoader"></span>
                        </button>
                    </form>
                </div>
            </div>

            <!-- ===== SINGLE RESULT ===== -->
            <div class="panel single-result" id="singleResult">
                <div class="panel-header">
                    <div class="panel-title">
                        <div class="panel-icon">ğŸ“¦</div>
                        Package Result
                    </div>
                </div>
                <div class="panel-body">
                    <div class="result-detail-card" id="resultCard"></div>
                </div>
            </div>

        </main>

        <!-- Footer -->
        <footer class="footer-bar">
            Built with â¤ï¸ for safer dependency management &nbsp;Â·&nbsp; VersionAutopsy Â© 2026
        </footer>

    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>

</html>